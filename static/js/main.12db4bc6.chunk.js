(this["webpackJsonptest-task-ava"]=this["webpackJsonptest-task-ava"]||[]).push([[0],{38:function(e,a,t){e.exports=t(66)},43:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(11),i=t.n(o),l=(t(43),t(19)),s=t(10),c=t(85),u=t(82),d=t(84),p=Object(u.a)({avgWrap:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:200,width:200,borderRadius:100,overflow:"hidden"},avaImg:{height:"inherit"},avaBlock:{display:"flex",justifyContent:"center"},btnsBlock:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"25px"},btns:{paddingBottom:10,"& > button + button":{marginLeft:10}},uploadProgress:{position:"absolute"},infoError:{position:"absolute",top:2,color:"red"}});var v,g=function(e){var a=Object(r.useState)(!1),t=Object(l.a)(a,2),o=t[0],i=t[1],s=Object(r.useState)({url:e.avaUrl,file:void 0}),u=Object(l.a)(s,2),v=u[0],g=u[1],f=Object(r.useRef)(null);Object(r.useEffect)((function(){g({url:e.avaUrl,file:void 0}),i(!1)}),[e.avaUrl]);var E=p();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:E.avaBlock},n.a.createElement("div",{className:E.avgWrap},n.a.createElement("img",{className:E.avaImg,ref:f,src:v.url,alt:""}),n.a.createElement(d.a,{className:E.uploadProgress,variant:"static",value:e.uploadProgress,size:225})),n.a.createElement("input",{id:"uploadUserAva",type:"file",style:{display:"none"},onChange:function(e){if(f.current&&e.target.files&&e.target.files[0]){var a=new FileReader,t=e.target.files[0];a.readAsDataURL(e.target.files[0]),a.onload=function(e){e.target&&"string"===typeof e.target.result&&(i(!0),g({url:e.target.result,file:t}))}}},accept:".png,.jpg",size:2e6})),n.a.createElement("div",{className:E.btnsBlock},o?n.a.createElement(n.a.Fragment,null,e.textError&&!e.isUploadingAva&&n.a.createElement("div",{className:E.infoError},e.textError),n.a.createElement("div",{className:E.btns},n.a.createElement(c.a,{onClick:function(){return e.uploadAvaThunk(v.file)},disabled:e.isUploadingAva,variant:"contained"},e.textError?"try again":"upload"),n.a.createElement(c.a,{onClick:function(){g({url:e.avaUrl,file:void 0}),i(!1),e.textError&&e.resetError()},disabled:e.isUploadingAva,variant:"contained"},"reset")),n.a.createElement(c.a,{onClick:e.uploadAvaRequestCancelThunk,disabled:!e.isUploadingAva,variant:"contained",style:{opacity:e.isUploadingAva?1:0,transition:"0.5s"}},"stop upload")):n.a.createElement("label",{htmlFor:"uploadUserAva"},n.a.createElement(c.a,{variant:"contained",component:"span"},"change"))))},f=t(18),E=t.n(f),m={};!function(e){e[e.sicces=0]="sicces",e[e.error=1]="error"}(v||(v={}));t(65);var h={isUploadingAva:!1,avaUrl:"https://www.imgonline.com.ua/examples/bee-on-daisy.jpg",uploadPrograss:0,textError:void 0},U=function(){return{type:"START_UPLOAD"}},b=function(){return{type:"STOP_UPLOAD"}},A=function(e){return{type:"CHANGE_PROGRESS",value:e}},O=function(e){return{type:"END_UPLOAD",avaUrl:e}},R=function(e){return{type:"SET_ERROR",textError:e}},y=function(){return{type:"RESET_ERROR"}};function P(e,a){switch(a.type){case"START_UPLOAD":return Object(s.a)({},e,{isUploadingAva:!0,uploadPrograss:0,textError:""});case"CHANGE_PROGRESS":return Object(s.a)({},e,{uploadPrograss:a.value});case"END_UPLOAD":return Object(s.a)({},e,{avaUrl:a.avaUrl,uploadPrograss:0,isUploadingAva:!1,textError:void 0});case"SET_ERROR":return Object(s.a)({},e,{textError:a.textError,isUploadingAva:!1,uploadPrograss:0});case"RESET_ERROR":return Object(s.a)({},e,{textError:""});case"STOP_UPLOAD":return Object(s.a)({},e,{isUploadingAva:!1,uploadPrograss:0});default:return e}}var k=function(){var e=Object(r.useReducer)(P,h),a=Object(l.a)(e,2),t=a[0],o=a[1];return n.a.createElement("div",{className:"App"},n.a.createElement(g,{uploadAvaThunk:function(e){if(e){var a=new FormData;a.append("img",e);var t=!1;setTimeout((function(){return!t&&o(U())}),100),function(e,a){return E.a.post("".concat("https://s-messenger.site/","loadImage"),e,{onUploadProgress:function(e){a(Math.round(e.loaded/e.total*100))},cancelToken:new E.a.CancelToken((function(e){m.cancel=e}))}).then((function(e){return e.data}))}(a,(function(e){return o(A(e))})).then((function(e){e.resultCode===v.sicces&&e.data?o(O("https://s-messenger.site/"+e.data.link)):o(R("Error loading"))})).catch((function(e){E.a.isCancel(e)||o(R("Error loading"))})).then((function(){t=!0}))}},uploadAvaRequestCancelThunk:function(){m.cancel&&(m.cancel(),o(b()))},resetError:function(){return o(y())},avaUrl:t.avaUrl,textError:t.textError,uploadProgress:t.uploadPrograss,isUploadingAva:t.isUploadingAva}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.12db4bc6.chunk.js.map